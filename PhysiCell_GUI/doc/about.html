<h2><strong>GUI Overview</strong></h2>
<ul>
<li><b>Config Basics</b> tab: input parameters common to all models (e.g., domain grid, simulation time, choice/frequency of outputs)</li>
<li><b>User Params</b> tab:&nbsp;&nbsp; input parameters that are model-specific</li>
<li><b>Out: Cell Plots</b> tab:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; output display of the cells</li>
<li><b>Out: Substrate Plots</b> tab: output display of the substrates</li>
</ul>
Clicking the 'Run' button will use the specified parameters and start a simulation. When clicked, it creates an "Output" widget
that can be clicked/expanded to reveal the progress (text) of the simulation. When the simulation generates output file(s),
they can be visualized in the appropriate output tabs. The "Max" count in each output tab will be dynamically updated 
as those output files are generated by the running simulation. When the "Run" button is clicked, it toggles to a "Cancel" button
that will terminate (not pause) the simulation.


<h2><strong>Introduction: a synthetic multicellular system to deliver a therapeutic &quot;cargo&quot;</strong></h2>

<p>This app demonstrates how simple &quot;rules&quot; for chemical- and contact-based communication could be used 
for <em>active</em> delivery of therapeutic compounds, while overcoming traditional biotransport limits and using 
hypoxia to target delivery. It is based on a published PhysiCell example in Ghaffarizadeh et al. (2018) [1]. In this 
model, <span style="font-weight: bold; color: green;">cancer cells (green)</span> rapidly divide while consuming 
oxygen, which drives the emergence of hypoxic gradients. Greater availability of oxygen drives faster proliferation, 
while low oxygen can trigger necrotic death, creating a necrotic core 
(<span style="font-weight: bold; color: brown;">brown cells</span>) in the center of the tumor. After initial 
growth, we &quot;inject&quot; a multicellular synthetic therapy.</p>

<p>In this (for now theoretical) synthetic therapy, 
<span style="font-weight: bold; color: red;">&quot;worker cells&quot; (red)</span> search for 
<span style="font-weight: bold; color: blue;">&quot;cargo cells&quot; (blue)</span>, form focal adhesions, and 
haul their cargo towards hypoxic (oxygen-depleted) regions in the tissue. Once they reach a region of sufficiently 
low oxygen, they release their cargo and resume their initial search for more cargo. Released cargo cells secrete a 
chemotherapeutic compound that can kill nearby tumor cells. (Cancer cells are shaded according to their level of 
therapy-induced damage.)</p>

<p style="text-align: center;"><a href="#instructions"><strong>Click here to jump straight to the 
instructions.&nbsp;</strong></a></p>

<p>This model and cloud-hosted demo are part of a course on computational multicellular systems biology created and 
taught by Dr. Paul Macklin in the Department of Intelligent Systems Engineering at Indiana University. It is also 
part of the education and outreach for the IU Engineered nanoBIO Node and the NCI-funded cancer systems biology 
grant U01CA232137. The models are built using 
<a href="https://journals.plos.org/ploscompbiol/article?id=10.1371/journal.pcbi.1005991" target="_blank">PhysiCell</a>: a 
C++ framework for multicellular systems biology [1].</p>

<h2><strong>Chemical components:</strong></h2>

<p>All chemical signals move by chemical diffusion in the simulated environment, using 
<a href="http://dx.doi.org/10.1093/bioinformatics/btv730" target="_blank">BioFVM</a> [2] to solve the reaction-diffusion 
equations. A key property is the <em>diffusion length scale</em>. Diffusion (with a diffusion coefficient <em>D</em>) helps 
spread a signal over large distances, while decay (and uptake) (with coefficient <em>&lambda;</em>) eliminates the signal to 
slow its spread. These effects compete to determine the characteristic distance <i>L</i> that a chemical signal travels.</p>

<p>That length scale <em>L</em> is given by <em>L</em> = sqrt( <em>D</em>/&lambda; ).</p>

<p>Choosing <em>D</em> and <em>&lambda;</em> can help to tune the chemical communication distance in these models.</p>

<h3>Oxygen (<em>&sigma;</em>):</h3>

<p>This is released by the computational boundary (a simplified model of a far-field vasculature), and consumed by tumor cells.</p>

<p>We use a far-field value of 38 mmHg (about 5%), which is a typical physioxic condition. See [1] and [2] for more ferences. 
We use a length scale of 1000 &mu;m, and cancer cell uptake gives a length scale of 100 &mu;m in densely packed regions.</p>

<h3>Chemoattractant (<em>a</em>):</h3>

<p>This factor is released by undocked cargo cells to help guide chemotaxis by worker cells.</p>

<p>The chemoattractant is nondimensionalized so that 0 &le; <em>a</em> &le; 1, and we initially assign a length scale of 100 &mu;m.</p>

<h3>Chemotherapeutic (<em>c</em>):</h3>

<p>This factor is released by released cargo cells to kill cancer cells.</p>

<p>The therapeutic is nondimensionalized so that 0 &le; <em>c</em> &le; 1, and we initially assign a length scale of 80 &mu;m.</p>

<h2><b>Cell agents:</b></h2>

<p>We use agent-based models to explore multicellular systems like this one. Each cell is modeled as a software agent with an 
independent state, and its own rules to change its behavior based on local environmental conditions and communication. We 
use PhysiCell as our modeling platform [1].&nbsp;</p>

<h3>Key features in the agent-based models:</h3>

<h4>Birth and death:</h4>

<p>Cells can proliferate (divide into two daughter cells of half size), with division rates regulated by cell rules. In our model, cells continuously work to grow towards a &quot;target&quot; mature volume.</p>

<p>Note that birth and death are stochastic events for each cell agent: if such a process occurs at rate <em>r</em>, then 
between now (<em>t</em>) and soon (<em>t</em> + &Delta;<em>t</em>), the probability of the event occurring for that agent 
is <em>r</em>&Delta;<em>t</em>.</p>

<h4>Secretion and uptake:</h4>

<p>Cells can secrete chemical factors, or they can remove them (i.e., consume or uptake). This can contribute to gradients in 
chemical factors, and it&#39;s a key method of communication between cells. Moreover, cells can &quot;sample&quot; the 
chemical state of their surrounding environment. Secreting is sending a signal. Uptaking and sampling is receiving a signal.</p>

<h4>Biased migration:</h4>

<p>Motile cells perform <em>biased migration</em>. After traveling for <em>T</em><sub>persistence</sub> time (the mean 
persistence time), they choose a new migration direction <span style="font-weight: bold;">d</span><sub>migrate</sub>. Based on 
the environmental conditions, the cell chooses a directional bias (intended direction) 
<span style="font-weight: bold;">d</span><sub>bias</sub> and a random unit vector 
<span style="font-weight: bold;">r</span>. The motile direction <span style="font-weight: bold;">d</span><sub>migrate</sub> 
is then determined by according to:</p>

<p style="text-align: center;"><span style="font-weight: bold;">d</span><sub>migrate</sub> = b <span style="font-weight: bold;">d</span><sub>bias</sub> + (1-b) <span style="font-weight: bold;">r</span>.</p>

<p>Here, <em>b</em> is a <em>bias</em> parameter (between 0 and 1) that determines how strongly biased migration is towards 
<span style="font-weight: bold;">d</span><sub>bias</sub>. If <em>b</em> =1, then migration is deterministic towards 
<span style="font-weight: bold;">d</span><sub>bias</sub>. If <em>b</em> = 0, then migration is completely random (Brownian).</p>

<p>Once the migration direction is chosen, it is normalized, and multiplied by the cell&#39;s migration speed.</p>

<h4>Mechanics:</h4>

<p>Cell agents can stick to one another within a prescribed interaction distance (some multiple of their radius), and they can 
exert a pushing force on neighbors. PhysiCell [1] uses potential functions to implement these simple mechanics. Notably, 
PhysiCell is an off-lattice model, meaning that cells can have variable sizes, and can move freely without grid artifacts.</p>

<p>They aren&#39;t required to move some prescribed number of spatial steps. They also can divide without checking for an 
open neighbor &quot;site&quot;. Instead, they can divide and push their neighbors out of the way.&nbsp;</p>

<h4 id="focal_adhesions">Focal adhesions:</h4>

<p>PhysiCell allows custom functions for any cell agents. We use this to model focal cell-cell adhesions as spring-like forces. 
If two cells <em>i</em> and <em>j</em> (with positions <span style="font-weight:bold">x</span><sub>i</sub> and 
<span style="font-weight:bold">x</span><sub>j</sub>) have a focal adhesion, then cell <em>i</em> is adhered to cell 
<em>j</em> with a spring-like force that we model as:</p>

<p style="text-align: center;"><span style="font-weight:bold">F</span><sub>ij</sub> = <em>&epsilon;</em> (<span style="font-weight: bold;">x</span><sub><em>j</em></sub> - <span style="font-weight: bold;">x</span><sub><em>i</em></sub>),</p>

<p>where <em>&epsilon;</em> is the elastic coefficient. Because PhysiCell has an inertialess formatulation (see the method 
paper in [1]), this is added directly to the cell&#39;s velocity, and so <em>&epsilon;</em> has units min<sup>-1</sup>. 
To model the finite deformability of cells and these elastic focual adhesions, we detach the cells if their distance 
(||<span style="font-weight: bold;">x</span><sub><em>j</em></sub> - <span style="font-weight: bold;">x</span><sub><em>j</em></sub>||) exceeds a set maximum distance <em>r</em><sub>max</sub>.</p>

<h3>Worker cells (<span style="color: red">red</span>)</h3>

<p>Worker cells do not divide, but they can be assigned an apoptotic death rate to model normal &quot;wear and tear.&quot; 
We model workers as non-adhesive except by spring-like focal adhesions; see <a href="#focal_adhesions">focal adhesions</a>. They 
are made more &quot;repulsive&quot; (by default, fivefold more repulsive) to allow them to more readily move through dense 
cellular regions. Worker cells consume oxygen, but at a reduced rate (by default, 10% of the rate of cancer cells).</p>

<p><span style="font-weight: bold">Unattached</span> worker cells use the following as their migration bias direction:&nbsp;</p>

<p style="text-align: center;"><span style="font-weight: bold;">d</span><sub>bias</sub> = &nabla;<em>a</em>,</p>

<p>where <em>a</em> is the chemoattractant released by unattached cargo cells. Note that &nabla; is the gradient operator 
that points towards higher concentrations of a chemical factor.</p>

<p>Unattached worker cells test for near contact with unattached cargo cells. If they detect an unattached cargo cell with 
active receptor <i>R</i> (<em>R</em> &asymp; 1), they form a focal adhesion (see <a href="#focal_adhesions">focal adhesions</a>).</p>

<p><span style="font-weight: bold">Attached</span> worker cells change their migration bias direction to:</p>

<p style="text-align: center;"><span style="font-weight: bold;">d</span><sub>bias</sub> = -&nabla;<em>&sigma;</em>,</p>

<p>where <em>&sigma;</em> is the oxygen.</p>

<h3>Cargo cells (<span style="color: blue;">blue</span>)</h3>

<p>Cargo cells do not divide, but they can be assigned an apoptotic death rate to model normal &quot;wear and tear.&quot; 
We model cargo as non-adhesive except by spring-like focal adhesions; see <a href="#focal_adhesions">focal adhesions</a>. 
They are made more &quot;repulsive&quot; (by default, fivefold more repulsive) to allow them to more readily move through dense 
cellular regions. Cargo cells consume oxygen, but at a reduced rate (by default, 10% of the rate of cancer cells). Note 
that all cargo cells are non-motile.</p>

<p>Initially, all cargo cells express a receptor <em>R</em> with dimensionless value 1, which is used to control their chemical 
secretions. If <em>R</em> = 1, they secrete chemoattractant <em>a</em> to help guide worker cells. If <em>R</em> = 0 and 
they are unattached, then they secrete the therapeutic <em>c</em>.</p>

<p>Cargo cells permanently deactivate their receptor (set <em>R</em> = 0) once they are attached to a worker cell. They 
detach from worker cells if <em>&sigma;</em> &lt; <em>&sigma;</em><sub>release</sub>.</p>

<h3>Cancer cells (<span style="color: green;">green</span>)</h3>

<p>Cancer cells divide at a rate proportional to oxygen availability, and they experience necrotic death at a rate that 
increases as oxygen decreases. We use the default parameter values from [1] for this sample model; they cannot be adjusted by 
users in the current demo version. Note that all cancer cells are non-motile in this example.</p>

<p>Beyond oxygen-driven birth and hypoxia-driven death, cancer cells are have a basic damage-repair model. Exposure to the 
chemotherapeutic compound <em>c</em> causes damage (<em>&omega;</em>, which can be repaired. We simulate this as</p>

<p style="text-align: center;"><!--
<div style="display: inline-block; vertical-align: middle;">
<div style="border-bottom: 1px solid black; text-align: center;">d<em>&omega;</em></div>
<div style="text-align: center">dt</div>
</div> 
--><sup>d<em>&omega;</em> </sup> &frasl; <sub>dt</sub> = <em>r</em><sub>damage</sub> <em>c</em> - <em>r</em><sub>repair</sub> <em>&omega;</em>,</p>

<p>where <em>c</em> is sampled at the cell&#39;s position. Cancer cells increase their apoptotic death rate by their therapeutic death rate <em>d</em><sub>therapy</sub>, which we model as</p>

<p style="text-align: center;"><em>d</em><sub>therapy</sub> = <sup> <em>&omega;</em> </sup> &frasl; <sub> <em>&omega;</em><sub>max</sub> </sub> <em>d</em><sub>max</sub> ,</p>

<p>where <em>d</em><sub>max</sub> is the maximum death rate that is reach when damage (<em>&omega;</em>) reaches <em>&omega;</em><sub>max</sub>.</p>

<p>In this model, we set <em>&omega;</em><sub>max</sub> by solving the damage model to find the steady state damage at a 
maximum value of <em>c</em> (which is 1):</p>

<p style="text-align: center;"><em>&omega;</em><sub>max</sub> = <sup> <em>r</em><sub>damage</sub> </sup> &frasl; <sub> <em>r</em><sub>repair</sub> </sub> .</p>

<h2><a id="instructions" name="instructions">Basic instructions</a></h2>

<p>Modify the parameters in the &quot;config basics&quot; and &quot;user params&quot; tabs. Click the &quot;run&quot; button once ready.</p>

<p>To view the cell plots, click the &quot;cell plots&quot; tab, and slide the bar to advance through simulation frames. 
Note that as the simulation runs, the &quot;max&quot; field (maximum frame number) will increase, so you can view more simulation frames.</p>

<p>To view the substrate fields, click the &quot;substrate plots&quot; tab, choose a substrate from the drop-down menu, 
and slide through the saved times. Note that as the simulation runs, the &quot;max&quot; field (maximum frame number) will 
increase, so you can view more simulation frames.</p>

<p>Note that you can download full simulation data for further exploration in your tools of choice.</p>

